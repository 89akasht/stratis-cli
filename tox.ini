[tox]
envlist=lint,test,coverage

[testenv:coverage]
deps =
    coverage
    dbus-python
    hypothesis
    pytest>=2.8
    pyudev
commands =
    coverage --version
    coverage run --timid --branch -m pytest tests/unit tests/dbus/test_signature_parser.py
    coverage report -m --show-missing --include="{envsitepackagesdir}/stratis_cli/*"
    coverage html --include="{envsitepackagesdir}/stratis_cli/*"

[testenv:lint]
deps =
    dbus-python
    hypothesis
    pylint
    pytest>=2.8
    pyudev
commands =
    ./check.py bin/stratis
    ./check.py src/stratis_cli
    ./check.py tests

[testenv:test]
deps =
    dbus-python
    hypothesis
    pytest>=2.8
    pyudev
commands =
    py.test tests/unit tests/dbus/test_signature_parser.py -rsx -v
